#!/bin/bash

# .
# ├── _id          # unique identifier (generated by blankd)
# ├── raw          # raw request
# ├── method       # request method in uppercase
# ├── host         # request host from Host: header
# ├── uri
# │   ├── raw      # raw request URI
# │   ├── path     # URI path without query
# │   ├── query    # URI query without path
# │   └── values   # URI form values in 'key=value' format
# ├── headers
# │   ├── raw      # raw request headers
# │   └── values   # request headers in 'key=value' format
# ├── cookies      # request cookies in 'key=value' format
# └── body
#     ├── raw      # raw request body
#     └── values   # request form values in 'key=value' format

rm shadowd_request
ln -s "$1" shadowd_request

if [[ -f shadowd_response ]]; then
    cat shadowd_response
    rm shadowd_response
    exit 0
fi

echo 200
